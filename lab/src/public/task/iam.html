<!DOCTYPE html><html><head><meta charset="utf-8"><title>Task 2 – IAM</title>
<link rel="stylesheet" href="/styles.css"></head><body><div class="container">
<div class="card"><h2>Task 2 – IAM: Unlock Logs</h2>
<p>Grant the role <code>LogReader</code> to user <code>student</code> using the admin API key: <code>admin123</code>.</p>
<ol>
  <li>POST <code>/iam/grant</code> with header <code>x-api-key: admin123</code> and body <code>{ "user": "student", "role": "LogReader" }</code></li>
  <li>GET <code>/cloud/logs</code> should return plaintext logs.</li>
  <li>Count the number of <code>ERROR</code> lines (you'll need it for Task 4).</li>
</ol>
<pre class="small">curl example:
curl -X POST http://localhost:8081/iam/grant \
  -H "x-api-key: admin123" -H "Content-Type: application/json" \
  -d '{"user":"student", "role":"LogReader"}'
 </pre>
 <div style="margin:12px 0 0;font-size:12px;color:#64748b;font-weight:600;">Document steps & error counts in final PDF/DOCX.</div>
</div>
<div class="card">
  <button onclick="check()">Check Role</button>
  <div id="out"></div>
</div>
<script>
async function check(){
  try {
    const res = await fetch('/iam/status');
    if(!res.ok){ document.getElementById('out').textContent='Fetch failed'; return; }
    const iam = await res.json();
    const roles = (iam.roles||[]);
    const ok = roles.includes('LogReader');
    document.getElementById('out').textContent = ok ? '✅ Role present' : '❌ Not yet';
  } catch(e){
    document.getElementById('out').textContent='Error';
  }
}
</script>
<a href="/contact.html" class="help-fab" title="Questions? Reach the on-call engineer."><img src="/help-contact.svg" width="38" height="38" alt="Contact"><span class="help-label">Questions? Contact on-call.</span></a>
</body></html>
