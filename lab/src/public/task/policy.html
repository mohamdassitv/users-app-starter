<!DOCTYPE html><html><head><meta charset="utf-8"><title>Task 8 – Policy</title>
<link rel="stylesheet" href="/styles.css"></head><body data-task-id="policy"><div class="container">
<div class="card"><h2>Task 8 – Policy & Rollback</h2>
<p>Block access to <code>/gateway/admin</code> while keeping <code>/gateway/ok</code> working.</p>
<ol>
  <li>POST to <code>/policy</code> with JSON body: <code>{ "deny": ["/admin"] }</code></li>
  <li>Verify: <code>/gateway/admin</code> → 403</li>
  <li>Rollback: POST <code>{ "deny": [] }</code> (optional)</li>
</ol>
<pre class="small">curl -X POST http://localhost:8081/policy -H "Content-Type: application/json" -d '{"deny":["/admin"]}'</pre>
</div>
<div class="card">
  <button onclick="check()">Check Policy</button>
  <pre id="out"></pre>
</div>
<div style="margin-top:12px;font-size:12px;color:#64748b;font-weight:600;">Explain validation & rollback in final PDF/DOCX submission.</div>
<script>
async function check(){
  try {
    const res = await fetch('/policy');
    if(!res.ok){ document.getElementById('out').textContent='Fetch failed'; return; }
    const pol = await res.json();
    document.getElementById('out').textContent = JSON.stringify(pol,null,2);
  } catch(e){
    document.getElementById('out').textContent='Error';
  }
}
</script>
<a href="/contact.html" class="help-fab" title="Questions? Reach the on-call engineer."><img src="/help-contact.svg" width="38" height="38" alt="Contact"><span class="help-label">Questions? Contact on-call.</span></a>
</body></html>
