<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Task 4 — High-Volume User Cleanup & On-Shift Automation</title>
<link rel="stylesheet" href="/styles.css">
<style>
.page{max-width:1280px;margin:0 auto;padding:24px 40px 120px;}
.hero-box{background:linear-gradient(150deg,#4f0028,#831843,#be185d,#db2777);background-size:240% 240%;animation:hbPulse 16s ease infinite;color:#ffeef7;border:1px solid #fb6fbe;border-radius:30px;padding:38px 44px 40px;position:relative;box-shadow:0 18px 50px -14px rgba(190,24,93,.55),0 6px 18px -6px rgba(190,24,93,.5);margin:0 0 40px;overflow:hidden;}
.hero-box:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 80% 22%,rgba(255,192,220,.42),transparent 65%);mix-blend-mode:screen;pointer-events:none;}
.hero-box h1{margin:0 0 12px;font-size:40px;letter-spacing:.05em;}
.hero-desc{margin:0;font-size:15px;line-height:1.55;font-weight:500;max-width:960px;}
.card{background:#fff;border:1px solid #fbcfe8;border-radius:20px;padding:32px 36px;margin:0 0 30px;box-shadow:0 6px 28px -12px rgba(219,39,119,.35);}
.card h2{margin:0 0 16px;font-size:26px;color:#831843;letter-spacing:.5px;}
.card h3{margin:24px 0 12px;font-size:20px;color:#be185d;}
.card ul{margin:0 0 16px 24px;line-height:1.6;}
.card p{margin:0 0 12px;line-height:1.6;}
table{border-collapse:collapse;width:100%;font-size:0.9rem;margin:16px 0;}
th,td{border:1px solid #fbcfe8;padding:8px 10px;text-align:left;}
th{background:linear-gradient(135deg,#fce7f3,#fbcfe8);color:#831843;font-weight:700;font-size:12px;letter-spacing:.1em;text-transform:uppercase;}
tbody tr:nth-child(even){background:#fff5fa;}
tbody tr:hover{background:#fff0f7;}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0;}
.muted{color:#64748b;font-size:14px;}
.danger{color:#dc2626;}
.btn-sm{font-size:0.75rem;padding:4px 10px;background:#fff;border:1px solid #f9a8d4;color:#be185d;border-radius:8px;cursor:pointer;font-weight:600;transition:.18s;}
.btn-sm:hover{background:#fff0f7;border-color:#ec4899;}
button{background:linear-gradient(135deg,#f472b6,#ec4899,#db2777);color:#fff;font-weight:600;border:none;padding:12px 24px;border-radius:14px;font-size:14px;cursor:pointer;letter-spacing:.4px;box-shadow:0 6px 20px -8px rgba(236,72,153,.5);transition:transform .18s,box-shadow .18s;}
button:hover{transform:translateY(-2px);box-shadow:0 12px 30px -12px rgba(236,72,153,.6);}
#pager{margin-top:12px;display:flex;gap:10px;align-items:center;}
@keyframes hbPulse{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
</style>
</head>
<body>
  <header class="site-header" id="siteHeader">
    <div class="brand" style="display:flex;align-items:center;gap:10px;cursor:pointer;" onclick="location.href='/tasks.html'">
      <img src="/logo.svg" alt="Ops101 Logo" class="logo-img">
      <span class="brand-hacker">CHECK POINT</span>
    </div>
  </header>
  <main class="page fade-in">
    <!-- exam bar removed; header timer globally -->
  <div class="card" id="story">
  <h2>Task 4 — High-Volume User Cleanup (Shift Escalation)</h2>
    <p><strong>Scenario.</strong> 02:10 UTC — A SaaS customer (enterprise plan) opens a P1 chat: they accidentally bulk‑provisioned thousands of duplicate placeholder accounts during a failed HR import. Their compliance team insists the extras must be purged before 03:00 UTC to avoid license overage penalties. Engineering’s bulk tooling is offline (maintenance window overran) and you are the only on‑call operations engineer with console access.</p>
    <p><strong>Your Mission.</strong> Provide a rapid, manual-but-efficient remediation path: list the 5,000 user entries, surgically delete selected rows (simulating the cleanup decisions), and optionally add corrected user records. This UI emulates a thin emergency console you might spin up to unblock a customer while awaiting a permanent batch job fix.</p>
    <p><strong>Objectives.</strong></p>
    <ul>
      <li>Page through the full 5,000-user dataset (confirm totals).</li>
      <li>Delete at least a handful of sample users (UI updates immediately).</li>
      <li>Add one new corrected user (first + last name) and verify it appears.</li>
      <li>Record an approach note: how you'd harden this stop‑gap (rate limiting, audit log, role gating).</li>
    </ul>
    <p class="muted">Surprise Twist: After each deletion the total count decreases and pagination shifts—ensure your paging logic remains consistent (no skipped or duplicated rows across page boundaries).</p>
    <h3>Deliverable (Shift Note Extract)</h3>
    <ul>
      <li>Initial total vs final total after deletions.</li>
      <li>Example deleted IDs (3–5) + rationale grouping (e.g., obvious pattern duplicates).</li>
      <li>One added user (ID + names).</li>
      <li>Hardening recommendations (3–6 bullets).</li>
    </ul>
  </div>
  <div class="card">
    <h3>User Dataset (5000 entries loaded locally)</h3>
    <div class="controls">
      <span id="meta" class="muted"></span>
      <button onclick="promptAdd()">Add User</button>
      <button onclick="resetUsers()" style="margin-left:auto;background:var(--bg-accent);color:#fff;border:none;">Reset Users</button>
    </div>
    <table id="tbl"><thead><tr><th>ID</th><th>First Name</th><th>Last Name</th><th>Action</th></tr></thead><tbody></tbody></table>
    <div id="pager" class="muted"></div>
  </div>
</div>
  </main>
  <!-- Right rail removed per simplification request -->
<a href="/contact.html" class="help-fab" id="helpFab" title="Questions? Reach the on-call engineer.">
  <img src="/help-contact.svg" alt="Contact" width="38" height="38">
  <span class="help-label">Questions? Contact on-call.</span>
</a>
<script>
// Local-only dataset of 5000 random users (no API calls)
const header=document.getElementById('siteHeader');window.addEventListener('scroll',()=>{header.classList.toggle('shrink',window.scrollY>16);});
const firstNames=['Liam','Emma','Noah','Olivia','Elijah','Ava','Sophia','Mason','Isabella','Logan','Mia','Lucas','Charlotte','Amelia','Ethan','Harper','James','Evelyn','Benjamin','Abigail','Henry','Ella','Sebastian','Avery','Jackson','Scarlett','Alexander','Emily','Owen','Aria','Daniel','Layla','Matthew','Chloe','Wyatt','Mila','Carter','Nora','Julian','Lily','Grayson','Zoey','Leo','Riley','Isaac','Victoria','Lincoln','Aurora','Ezra','Penelope'];
const lastNames=['Smith','Johnson','Williams','Brown','Jones','Garcia','Miller','Davis','Rodriguez','Martinez','Hernandez','Lopez','Gonzalez','Wilson','Anderson','Thomas','Taylor','Moore','Jackson','Martin','Lee','Perez','Thompson','White','Harris','Sanchez','Clark','Ramirez','Lewis','Robinson','Walker','Young','Allen','King','Wright','Scott','Torres','Nguyen','Hill','Flores','Green','Adams','Nelson','Baker','Hall','Rivera','Campbell','Mitchell','Carter'];
let users=[]; let nextId=1;
function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}
function seedUsers(){users=[]; for(let i=0;i<5000;i++){users.push({id:nextId++,firstName:rand(firstNames),lastName:rand(lastNames)});} }
function render(){const tbody=document.querySelector('#tbl tbody'); tbody.innerHTML=users.map(u=>`<tr data-id="${u.id}"><td>${u.id}</td><td>${u.firstName}</td><td>${u.lastName}</td><td><button class="btn-sm" onclick="delUser(${u.id})">Delete</button></td></tr>`).join(''); document.getElementById('meta').textContent=`Showing all ${users.length} users`; }
function delUser(id){const idx=users.findIndex(u=>u.id===id); if(idx>-1){users.splice(idx,1); render();}}
function promptAdd(){const fn=prompt('First Name?'); if(!fn) return; const ln=prompt('Last Name?'); if(!ln) return; users.push({id:nextId++,firstName:fn,lastName:ln}); render(); const row=document.querySelector(`tr[data-id='${nextId-1}']`); if(row) row.style.background='#d1fae5';}
function resetUsers(){if(!confirm('Reset to fresh random 5000 users?')) return; nextId=1; seedUsers(); render();}
seedUsers(); render();
</script>
</body>
</html>