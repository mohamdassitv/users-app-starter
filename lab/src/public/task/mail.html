<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Task 2 — Customer Escalation Email Response</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="/styles.css" />
<style>
.page{max-width:1140px;margin:0 auto;padding:24px 40px 90px;}
.mail-shell{background:linear-gradient(145deg,#4f0028,#831843,#be185d,#db2777);background-size:240% 240%;animation:scenPulse 14s ease infinite;color:#ffeef7;border:1px solid #fb6fbe;border-radius:26px;padding:34px 38px 34px;position:relative;box-shadow:0 14px 40px -12px rgba(190,24,93,.55),0 4px 14px -4px rgba(190,24,93,.5);margin:0 0 56px;overflow:hidden;}
.mail-shell:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 82% 18%,rgba(255,184,220,.42),transparent 62%);pointer-events:none;mix-blend-mode:screen;}
.mail-shell h1{margin:0 0 10px;font-size:38px;letter-spacing:.05em;}
.mail-intro{font-size:15px;line-height:1.55;margin:0;font-weight:500;}
.qa-area{display:flex;flex-direction:column;gap:40px;}
.qa-card{background:#fffafb;border:1px solid #fbcfe8;border-radius:26px;padding:30px 34px 40px;position:relative;box-shadow:0 4px 20px -8px rgba(219,39,119,.35),0 1px 3px rgba(0,0,0,.08);}
.qa-card:before{content:"";position:absolute;inset:0;border-radius:26px;padding:1px;background:linear-gradient(145deg,#fbcfe8,#f472b6,#ec4899,#db2777);background-size:180% 180%;animation:qaGlow 10s ease infinite;-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;opacity:.9;pointer-events:none;}
.qa-card>*{position:relative;z-index:1;}
.mail-envelope{margin:8px 0 18px;border:1px solid #fbcfe8;background:linear-gradient(150deg,#fff9fc,#fff5fa,#ffe9f3);border-radius:18px;box-shadow:0 6px 22px -10px rgba(219,39,119,.35),0 2px 6px -2px rgba(0,0,0,.08);overflow:hidden;font-size:13px;}
.mail-header{background:linear-gradient(120deg,#fce7f3,#fbcfe8,#f9a8d4);padding:14px 18px 12px;display:flex;flex-direction:column;gap:6px;position:relative;}
.mail-header:after{content:"";position:absolute;inset:0;pointer-events:none;mix-blend-mode:overlay;background:radial-gradient(circle at 82% 28%,rgba(255,255,255,.6),transparent 70%);} 
.mh-row{display:flex;flex-wrap:wrap;gap:6px;align-items:baseline;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;}
.mh-label{font-size:11px;letter-spacing:.15em;text-transform:uppercase;font-weight:700;color:#9d174d;background:#ffe4ef;padding:3px 8px 2px;border-radius:8px;}
.mh-value{font-weight:600;color:#4a044e;}
.mh-value.subject{color:#831843;font-size:13px;font-weight:700;text-shadow:0 1px 0 #ffe4ef;}
.mail-body{padding:18px 22px 20px;line-height:1.55;font-family:"Segoe UI",Roboto,system-ui,sans-serif;color:#3f0a2e;background:linear-gradient(145deg,#fff,#fff5fa 55%,#ffe4ef);}
.mail-body p{margin:0 0 10px;}
.mail-body p:last-child{margin-bottom:0;}
.answer-box{width:100%;resize:vertical;min-height:220px;border:1px solid #cbd5e1;border-radius:16px;padding:16px 18px;font-size:14px;line-height:1.5;font-family:ui-monospace,Menlo,Consolas,monospace;background:#f8fafc;transition:border-color .18s,box-shadow .18s;}
.answer-box:focus{outline:none;border-color:#ec4899;box-shadow:0 0 0 3px rgba(236,72,153,.35);background:#fff;}
.meta{margin-top:8px;font-size:12px;color:#64748b;text-align:right;}
.actions{display:flex;gap:16px;margin-top:8px;}
.btn-primary{background:linear-gradient(135deg,#f472b6,#ec4899,#db2777);color:#fff;font-weight:600;border:none;padding:14px 28px;border-radius:14px;font-size:15px;cursor:pointer;display:inline-flex;align-items:center;gap:8px;letter-spacing:.4px;box-shadow:0 6px 18px -6px rgba(236,72,153,.5),0 2px 4px -1px rgba(0,0,0,.35);transition:transform .18s, box-shadow .18s;}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 26px -10px rgba(236,72,153,.6),0 4px 8px -3px rgba(0,0,0,.28);}
.btn-primary:active{transform:translateY(0);}
.btn-ghost{background:#fff;color:#be185d;border:1px solid #f9a8d4;padding:12px 22px;border-radius:12px;font-weight:500;cursor:pointer;font-size:14px;transition:background .18s,border-color .18s,box-shadow .18s,color .18s;}
.btn-ghost:hover{background:#fff0f7;border-color:#f472b6;color:#9d174d;}
.btn-ghost:active{background:#ffe4ef;}
.save-state.dirty{color:#b45309;}
.save-state.saved{color:#059669;}
@keyframes scenPulse{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
@keyframes qaGlow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
</style>
</head>
<body>
<header class="site-header" id="siteHeader">
  <div class="brand" style="display:flex;align-items:center;gap:10px;cursor:pointer;" onclick="location.href='/tasks.html'">
    <img src="/logo.svg" alt="Logo" class="logo-img">
    <span class="brand-hacker">CHECK POINT</span>
  </div>
</header>
<main class="page fade-in">
  <section class="mail-shell">
    <h1>Task 2 — Customer Escalation Email Response</h1>
    <p class="mail-intro">Craft a professional, de‑escalating response to the customer's angry email while preserving investigative neutrality and securing missing telemetry.</p>
  </section>
  <section class="qa-area">
    <div class="qa-card">
      <h2 style="margin-top:0;margin-bottom:12px;font-size:20px;letter-spacing:.5px;color:#0f172a;">Escalation Email (Raw)</h2>
      <div class="mail-envelope" role="document" aria-label="Escalation email sample">
        <div class="mail-header">
          <div class="mh-row"><span class="mh-label">Subject:</span><span class="mh-value subject">Harmony Connect NOT WORKING - PLEASE HELP HERE !!!!!!!!!!!</span></div>
          <div class="mh-row"><span class="mh-label">From:</span><span class="mh-value">Othman Kharoubi</span></div>
          <div class="mh-row"><span class="mh-label">To:</span><span class="mh-value">'support@support.support'</span></div>
        </div>
        <div class="mail-body">
          <p>We opened a Service Request 123456 7 days ago. Since then – no response!!!!</p>
          <p>The support level we receive for the amount of money we pay is outrageous!</p>
          <p>Our users suffer from frequent connectivity issues!</p>
          <p>Please respond ASAP!!!</p>
          <p style="margin-top:22px;">B.R.<br>Othman Kharoubi<br>CTO - Mycompany</p>
        </div>
      </div>
      <h2 style="margin:32px 0 10px;font-size:20px;color:#0f172a;letter-spacing:.5px;">Your Response Draft</h2>
  <textarea id="emailAnswer" class="answer-box" data-rich="1" placeholder="Compose a calming, structured reply: acknowledgment → current facts → immediate actions & ETA → telemetry request → next update time..." rows="14"></textarea>
      <div class="meta"><span id="saveState" class="save-state">Not saved</span></div>
      <div class="actions">
        <button type="button" class="btn-primary" id="btnSave">Save Draft</button>
        <button type="button" class="btn-ghost" id="btnClear">Reset</button>
      </div>
      <p class="muted" style="font-size:11.5px;margin-top:6px;">Draft is stored locally only (<code>localStorage</code>). Use the global dock for full exam submission.</p>
    </div>
  </section>
</main>
<script src="/collab-dock-simple.js?v=3" defer></script>
<script src="/ckeditor-init.js" defer></script>
<script src="/header-timer.js" defer></script>
<script>
(function(){
  const KEY='mailTaskAnswer_v1';
  const LEGACY_CASE_KEY='caseStudyQA_v1'; // for migration of old email answers
  const VERSION=1; // standalone mail task
  const box=document.getElementById('emailAnswer');
  const stateEl=document.getElementById('saveState');
  const btnSave=document.getElementById('btnSave');
  const btnClear=document.getElementById('btnClear');
  function markSaved(){ stateEl.textContent='Saved '+new Date().toLocaleTimeString(); stateEl.className='save-state saved'; }
  function markDirty(){ stateEl.textContent='Unsaved changes'; stateEl.className='save-state dirty'; }
  function load(){
    try{
      const raw=localStorage.getItem(KEY);
      if(raw){ const data=JSON.parse(raw); if(data.answer!=null) box.value=data.answer; markSaved(); return; }
      // migration attempt from older case study versions
      const legacy=localStorage.getItem(LEGACY_CASE_KEY);
      if(legacy){
        const data=JSON.parse(legacy);
        // v1: a1=email
        // v2: a2=email
        // v3: a2=email
        if(!data.version || data.version===1){ if(data.a1) box.value=data.a1; }
        else if(data.version===2 || data.version===3){ if(data.a2) box.value=data.a2; }
        if(box.value) markSaved();
      }
    }catch(e){ console.warn('load fail',e); }
  }
  function save(){ try{ localStorage.setItem(KEY, JSON.stringify({version:VERSION,answer:box.value,ts:Date.now()})); markSaved(); }catch(e){ alert('Save failed: '+e); }}
  function clearAll(){ if(!confirm('Clear draft?')) return; localStorage.removeItem(KEY); box.value=''; stateEl.textContent='Not saved'; stateEl.className='save-state'; }
  box.addEventListener('input',markDirty);
  btnSave.addEventListener('click',save);
  btnClear.addEventListener('click',clearAll);
  load();
})();
</script>
</body>
</html>